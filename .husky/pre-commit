echo "ğŸ¤– Running pre-commit checks for agent workflow..."

# Check for secrets
if [ -f "scripts/check-secrets.sh" ]; then
	echo "ğŸ” Scanning for secrets..."
	chmod +x scripts/check-secrets.sh
	./scripts/check-secrets.sh || exit 1
fi

# Run lint-staged for monorepo
echo "ğŸ“ Running lint-staged..."
pnpm lint-staged || exit 1

# Run typecheck (quick validation)
echo "ğŸ” Running TypeScript checks..."
pnpm run typecheck || {
	echo "âŒ TypeScript errors found. Please fix before committing."
	echo "   Run: pnpm run typecheck"
	exit 1
}

echo "âœ… Pre-commit checks passed! Ready to commit."

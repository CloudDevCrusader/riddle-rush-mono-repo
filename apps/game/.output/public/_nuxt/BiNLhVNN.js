import{Z as U,$ as B,k as E,s as V,a0 as M,N as c,r as C,d as X,x as Y,y as P,z as k,A as s,M as G,a1 as D,a2 as I,B as j,a3 as z,P as K,Q as W,R as O,S as q,a4 as F,a5 as H,J,_ as Q}from"./ZWM7LZrB.js";import{u as Z}from"./CAiwMZCU.js";import{u as ee}from"./B5AQurGQ.js";import{u as te}from"./C202RNzR.js";import"./COAuIF2k.js";const ae=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const se=Object.prototype.toString,le=t=>se.call(t)==="[object Object]";function R(t){return Array.isArray(t)?t:[t]}function ne(t,l,n){return U(t,l,{...n,immediate:!0})}const re=ae?window:void 0;function oe(t){var l;const n=M(t);return(l=n?.$el)!==null&&l!==void 0?l:n}function T(...t){const l=(e,r,p,g)=>(e.addEventListener(r,p,g),()=>e.removeEventListener(r,p,g)),n=E(()=>{const e=R(M(t[0])).filter(r=>r!=null);return e.every(r=>typeof r!="string")?e:void 0});return ne(()=>{var e,r;return[(e=(r=n.value)===null||r===void 0?void 0:r.map(p=>oe(p)))!==null&&e!==void 0?e:[re].filter(p=>p!=null),R(M(n.value?t[1]:t[0])),R(c(n.value?t[2]:t[1])),M(n.value?t[3]:t[2])]},([e,r,p,g],d,o)=>{if(!e?.length||!r?.length||!p?.length)return;const y=le(g)?{...g}:g,u=e.flatMap(v=>r.flatMap(f=>p.map(S=>l(v,f,S,y))));o(()=>{u.forEach(v=>v())})},{flush:"post"})}function ie(t,l={}){const{threshold:n=50,onSwipe:e,onSwipeEnd:r,onSwipeStart:p,passive:g=!0}=l,d=B({x:0,y:0}),o=B({x:0,y:0}),y=E(()=>d.x-o.x),u=E(()=>d.y-o.y),{max:v,abs:f}=Math,S=E(()=>v(f(y.value),f(u.value))>=n),_=V(!1),$=E(()=>S.value?f(y.value)>f(u.value)?y.value>0?"left":"right":u.value>0?"up":"down":"none"),x=a=>[a.touches[0].clientX,a.touches[0].clientY],A=(a,m)=>{d.x=a,d.y=m},N=(a,m)=>{o.x=a,o.y=m},b={passive:g,capture:!g},L=a=>{_.value&&r?.(a,$.value),_.value=!1},h=[T(t,"touchstart",a=>{if(a.touches.length!==1)return;const[m,w]=x(a);A(m,w),N(m,w),p?.(a)},b),T(t,"touchmove",a=>{if(a.touches.length!==1)return;const[m,w]=x(a);N(m,w),b.capture&&!b.passive&&Math.abs(y.value)>Math.abs(u.value)&&a.preventDefault(),!_.value&&S.value&&(_.value=!0),_.value&&e?.(a)},b),T(t,["touchend","touchcancel"],L,b)];return{isSwiping:_,direction:$,coordsStart:d,coordsEnd:o,lengthX:y,lengthY:u,stop:()=>h.forEach(a=>a())}}function ce(t){const l=C(null),{isSwiping:n,direction:e,lengthX:r,lengthY:p}=ie(l,{threshold:t?.threshold??50,onSwipeEnd:(g,d)=>{d==="left"&&t?.onSwipeLeft?t.onSwipeLeft():d==="right"&&t?.onSwipeRight?t.onSwipeRight():d==="up"&&t?.onSwipeUp?t.onSwipeUp():d==="down"&&t?.onSwipeDown&&t.onSwipeDown()}});return{pageElement:l,isSwiping:n,direction:e,lengthX:r,lengthY:p}}const ue=["src"],pe=["src"],de={class:"container"},me={class:"title-container animate-fade-in"},ye=["src"],he=["src"],ge={class:"players-list-container animate-scale-in"},ve={class:"players-list"},fe=["src"],_e={class:"player-name"},be=["onClick"],Se=["src"],we=["src"],Pe={class:"scroll-bar"},ke=["src"],$e=["src"],xe={key:0,class:"player-input-container animate-scale-in"},Ee=["placeholder"],Ce={class:"action-buttons animate-slide-up"},Ne=["src"],Me=["src"],Ae=["disabled"],Le=["src"],Re=X({__name:"players",setup(t){const{baseUrl:l,toast:n,t:e,goBack:r}=Z(),{goToRoundStart:p}=ee(),{gameStore:g}=te(),d=z,o=C([{name:"Player 1"},{name:"Player 2"}]),y=C(!1),u=C(""),v=C(null),f=()=>{if(o.value.length>=d){n.warning(e("players.max_players",`Maximum ${d} players allowed`));return}u.value=`Player ${o.value.length+1}`,y.value=!0,H(()=>{v.value?.focus(),v.value?.select()})},S=h=>{const i=h.trim();return i?i.length<1?{valid:!1,error:e("players.name_too_short","Player name must be at least 1 character")}:i.length>20?{valid:!1,error:e("players.name_too_long","Player name must be 20 characters or less")}:!i.match(/^Player \d+$/i)&&o.value.some(m=>m.name.toLowerCase()===i.toLowerCase())?{valid:!1,error:e("players.duplicate_name","A player with this name already exists")}:{valid:!0}:{valid:!1,error:e("players.name_required","Please enter a player name")}},_=()=>{u.value=u.value.replace(/[<>]/g,""),u.value.length>20&&(u.value=u.value.slice(0,20))},$=()=>{const h=u.value.trim(),i=S(h);if(!i.valid){n.warning(i.error||e("players.name_required","Please enter a player name"));return}o.value.push({name:h}),n.success(e("players.added",`${h} added!`)),u.value="",y.value=!1},x=()=>{u.value="",y.value=!1},A=h=>{const i=o.value[h]?.name;o.value.splice(h,1),i&&n.info(e("players.removed",`${i} removed`))},N=async()=>{if(o.value.length===0){n.warning(e("players.need_players","Add at least one player to start"));return}if(o.value.filter(i=>!S(i.name).valid).length>0){n.warning(e("players.invalid_names","Please fix invalid player names before starting"));return}try{const i=o.value.map(w=>w.name);g.pendingPlayerNames=i;const a=[e("players.ready",`${o.value.length} players ready!`),e("players.lets_start","Let's start the show! ðŸŽ‰"),e("players.good_luck","Good luck everyone! ðŸ€"),e("players.may_the_best_win","May the best win! ðŸ†"),e("players.game_on","Game on! ðŸŽ®"),e("players.lets_play","Let's play! ðŸ˜ƒ"),e("players.showtime","Showtime! â­"),e("players.ready_set_go","Ready, set, go! ðŸš€")],m=a[Math.floor(Math.random()*a.length)];n.success(m),p()}catch(i){J().error("Error starting game:",i),n.error(e("players.error_start","Failed to start game. Please try again."))}},b=()=>{r()},{pageElement:L}=ce({onSwipeRight:()=>{b()},threshold:80});return Y({title:"Players",meta:[{name:"description",content:"Select players for the game"}]}),(h,i)=>(k(),P("div",{ref_key:"pageElement",ref:L,class:"players-page"},[s("img",{src:`${c(l)}assets/players/BACKGROUND.png`,alt:"Background",class:"page-bg"},null,8,ue),s("button",{class:"back-btn tap-highlight no-select",onClick:b},[s("img",{src:`${c(l)}assets/players/back.png`,alt:"Back"},null,8,pe)]),s("div",de,[s("div",me,[s("img",{src:`${c(l)}assets/players/players.png`,alt:"Players",class:"title-image"},null,8,ye),s("img",{src:`${c(l)}assets/players/top.png`,alt:"Top decoration",class:"top-decoration"},null,8,he)]),s("div",ge,[s("div",ve,[(k(!0),P(D,null,I(c(o),(a,m)=>(k(),P("div",{key:m,class:"player-item"},[s("img",{src:`${c(l)}assets/players/Group 10.png`,alt:"Player slot",class:"player-slot-bg"},null,8,fe),s("span",_e,j(a.name),1),s("button",{class:"remove-player-btn tap-highlight no-select",onClick:w=>A(m)},[s("img",{src:`${c(l)}assets/players/minus.png`,alt:"Remove"},null,8,Se)],8,be)]))),128)),(k(!0),P(D,null,I(Math.max(0,c(d)-c(o).length),a=>(k(),P("div",{key:`empty-${a}`,class:"player-item empty"},[s("img",{src:`${c(l)}assets/players/Group 10.png`,alt:"Empty slot",class:"player-slot-bg"},null,8,we),i[1]||(i[1]=s("span",{class:"player-name empty-text"},"Empty Slot",-1))]))),128))]),s("div",Pe,[s("img",{src:`${c(l)}assets/players/scroll bar.png`,alt:"Scroll bar",class:"scroll-bg"},null,8,ke),s("img",{src:`${c(l)}assets/players/screoll.png`,alt:"Scroll handle",class:"scroll-handle"},null,8,$e)])]),c(y)?(k(),P("div",xe,[K(s("input",{ref_key:"playerNameInput",ref:v,"onUpdate:modelValue":i[0]||(i[0]=a=>q(u)?u.value=a:null),type:"text",placeholder:h.$t("players.enter_name","Enter player name"),class:"player-name-input tap-highlight",maxlength:"20",onKeyup:[O($,["enter"]),O(x,["esc"])],onInput:_},null,40,Ee),[[W,c(u)]]),s("div",{class:"input-buttons"},[s("button",{class:"input-btn confirm-btn tap-highlight no-select",onClick:$}," âœ“ "),s("button",{class:"input-btn cancel-btn tap-highlight no-select",onClick:x}," âœ• ")])])):G("",!0),s("div",Ce,[c(o).length<c(d)&&!c(y)?(k(),P("button",{key:0,class:"action-btn add-btn tap-highlight no-select",onClick:f},[s("img",{src:`${c(l)}assets/players/add back.png`,alt:"Add button bg",class:"btn-bg"},null,8,Ne),s("img",{src:`${c(l)}assets/players/add.png`,alt:"Add",class:"btn-icon"},null,8,Me)])):G("",!0),s("button",{disabled:c(o).length===0,class:F(["action-btn start-btn tap-highlight no-select",{disabled:c(o).length===0}]),onClick:N},[s("img",{src:`${c(l)}assets/players/start.png`,alt:"Start"},null,8,Le)],10,Ae)])])],512))}}),Oe=Q(Re,[["__scopeId","data-v-506b114a"]]);export{Oe as default};

import{d as M,r as g,k as E,Z as H,y as p,z as v,A as e,a9 as B,N as s,a1 as Y,a2 as j,a4 as x,M as k,B as i,_ as T,o as q,x as J,C as $,D as G,S as K,X as O,aa as X,ab as Z,J as Q}from"./DWK_0sY3.js";import{u as ee}from"./DQm_Q92W.js";import{u as te}from"./DrwKUBQh.js";import{u as se}from"./LkFk--Sl.js";import"./Z6VXXfMf.js";const ne={class:"wheel-container"},ae=["onClick"],oe={class:"segment-content"},le={class:"wheel-center"},re={class:"center-circle"},ce={key:0,class:"selected-icon"},ie={key:1,class:"center-icon"},ue=M({__name:"FortuneWheel",props:{items:{},getItemKey:{},getItemLabel:{},getItemIcon:{type:Function,default:()=>()=>""},getItemColor:{type:Function,default:void 0},centerIcon:{default:"ðŸŽ¯"},modelValue:{default:null}},emits:["update:modelValue","spin-complete"],setup(l,{expose:F,emit:I}){const _=l,r=I,f=g(_.modelValue),n=g(0),u=g(!1),y=E(()=>360/_.items.length),S=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E2","#F8C471","#82E0AA","#D2B4DE","#85C1E2","#F8C471","#82E0AA"],A=t=>{const a=t*y.value,c=_.getItemColor?_.getItemColor(_.items[t],t):S[t%S.length];return{transform:`rotate(${a}deg)`,transformOrigin:"50% 50%",background:c,"--segment-color":c}},b=t=>{u.value=!0;const a=performance.now(),c=1800,d=n.value,C=t-d,w=V=>{const L=V-a,R=Math.min(L/c,1),W=1-Math.pow(1-R,3);n.value=d+C*W,R<1?requestAnimationFrame(w):(u.value=!1,n.value=t)};requestAnimationFrame(w)},D=(t,a)=>{if(u.value||!t)return;f.value=t,r("update:modelValue",t);const C=-(a*y.value)+90-360*3;b(C),setTimeout(()=>{t&&r("spin-complete",t)},1500)};return F({spinRandom:()=>{if(u.value||_.items.length===0)return null;const t=Math.floor(Math.random()*_.items.length),a=_.items[t];if(!a)return null;const c=-(t*y.value)+90,d=3+Math.floor(Math.random()*3),C=c-360*d;return b(C),setTimeout(()=>{a&&(f.value=a,r("update:modelValue",a),r("spin-complete",a))},1800),a},isSpinning:u}),H(()=>_.modelValue,t=>{f.value=t}),(t,a)=>(v(),p("div",ne,[a[1]||(a[1]=e("div",{class:"wheel-pointer"},[e("div",{class:"pointer-arrow"},"â–¼")],-1)),e("div",{class:"fortune-wheel",style:B({transform:`rotate(${s(n)}deg)`})},[(v(!0),p(Y,null,j(l.items,(c,d)=>(v(),p("button",{key:l.getItemKey(c,d),class:x(["wheel-segment tap-highlight no-select",{selected:s(f)&&l.getItemKey(s(f),-1)===l.getItemKey(c,d)}]),style:B(A(d)),onClick:C=>D(c,d)},[e("div",oe,[l.getItemIcon(c)?(v(),p("span",{key:0,class:"segment-icon",style:B({transform:`rotate(-${s(n)+d*s(y)}deg)`})},i(l.getItemIcon(c)),5)):k("",!0),e("span",{class:"segment-text",style:B({transform:`rotate(-${s(n)+d*s(y)}deg)`})},i(l.getItemLabel(c)),5)])],14,ae))),128))],4),e("div",le,[a[0]||(a[0]=e("div",{class:"center-glow"},null,-1)),e("div",re,[s(f)&&l.getItemIcon(s(f))?(v(),p("span",ce,i(l.getItemIcon(s(f))),1)):(v(),p("span",ie,i(l.centerIcon),1))])])]))}}),de=Object.assign(T(ue,[["__scopeId","data-v-9d537988"]]),{__name:"FortuneWheel"}),me={key:0,class:"spinner__label"},ge=M({__name:"Spinner",props:{size:{default:"md"},label:{},overlay:{type:Boolean,default:!1}},setup(l){return(F,I)=>(v(),p("div",{class:x(["spinner",[`spinner--${l.size}`,{"spinner--overlay":l.overlay}]])},[I[0]||(I[0]=e("div",{class:"spinner__circle"},null,-1)),l.label?(v(),p("span",me,i(l.label),1)):k("",!0)],2))}}),pe=Object.assign(T(ge,[["__scopeId","data-v-a9842e43"]]),{__name:"Spinner"}),ve={class:"round-start-page"},_e=["src"],fe={class:"top-bar"},he={class:"round-indicator"},ye={class:"round-text"},Ce={class:"container"},Ie={key:0,class:"wheels-container"},Se={class:"wheel-wrapper"},be={class:"wheel-label"},we={class:"wheel-wrapper"},Re={class:"wheel-label"},$e={key:0,class:"results-display"},ke={class:"result-item animate-scale-in"},Fe={class:"result-label"},Ae={class:"result-value"},De={class:"result-icon"},Ne={class:"result-text"},Be={class:"result-item animate-scale-in",style:{"animation-delay":"0.2s"}},Ee={class:"result-label"},Ve={class:"result-value"},Le={class:"result-text result-letter"},We={key:0,class:"loading-container"},Me={class:"loading-text"},Te=M({__name:"round-start",setup(l){const{baseUrl:F,t:I}=ee(),{goToGame:_}=te(),{gameStore:r}=se(),f="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),n=g(null),u=g(null),y=g([]),S=g(),A=g(),b=g(!1),D=g(!1),N=g(!1),t=g(!1),a={female_name:"ðŸ‘©",male_name:"ðŸ‘¨",water_vehicle:"â›µ",flowers:"ðŸŒ¸",plants:"ðŸŒ¿",profession:"ðŸ‘”",insect:"ðŸ›",animal:"ðŸ¦",city:"ðŸ™ï¸",country:"ðŸŒ",food:"ðŸ•",drink:"ðŸ§ƒ",sport:"âš½",music:"ðŸŽµ",movie:"ðŸŽ¬"},c=E(()=>n.value?w(n.value):"ðŸ“¦"),d=E(()=>n.value?I(`categories.${n.value.searchWord}`,n.value.name):""),C=E(()=>r.currentSession?r.currentSession.currentRound+1:1);q(async()=>{await r.fetchCategories();const o=r.categories;y.value=o.slice(0,12),setTimeout(()=>{S.value?.spinRandom(),A.value?.spinRandom()},500)});const w=o=>a[o.searchWord]||"ðŸ“¦",V=o=>{n.value=o,b.value=!0,R()},L=o=>{u.value=o,D.value=!0,R()},R=()=>{b.value&&D.value&&setTimeout(()=>{N.value=!0,setTimeout(()=>{W()},X)},Z)},W=async()=>{if(!(!n.value||!u.value)){t.value=!0;try{if(!!r.currentSession)await r.startNextRound(n.value,u.value);else{const h=r.pendingPlayerNames.length>0?r.pendingPlayerNames:["Player 1"];await r.setupPlayers(h,void 0,u.value,n.value),r.pendingPlayerNames=[],r.selectedLetter=null}await _()}catch(o){Q().error("Failed to start game:",o),t.value=!1}}};return J({title:"Round Start",meta:[{name:"description",content:"Spinning for category and letter"}]}),(o,h)=>{const P=de,z=pe;return v(),p("div",ve,[e("img",{src:`${s(F)}assets/alphabets/BACKGROUND.png`,alt:"Background",class:"page-bg"},null,8,_e),e("div",fe,[e("div",he,[e("div",ye,i(o.$t("game.round","Round"))+" "+i(s(C)),1)])]),e("div",Ce,[$(O,{name:"wheel-fade"},{default:G(()=>[s(N)?k("",!0):(v(),p("div",Ie,[e("div",Se,[e("div",be,i(o.$t("common.category","Category")),1),$(P,{ref_key:"categoryWheelRef",ref:S,modelValue:s(n),"onUpdate:modelValue":h[0]||(h[0]=m=>K(n)?n.value=m:null),items:s(y),"get-item-key":(m,U)=>m?.searchWord||U,"get-item-label":m=>o.$t(`categories.${m.searchWord}`,m.name),"get-item-icon":w,"center-icon":"ðŸŽ¯",onSpinComplete:V},null,8,["modelValue","items","get-item-key","get-item-label"])]),e("div",we,[e("div",Re,i(o.$t("common.letter","Letter")),1),$(P,{ref_key:"letterWheelRef",ref:A,modelValue:s(u),"onUpdate:modelValue":h[1]||(h[1]=m=>K(u)?u.value=m:null),items:s(f),"get-item-key":(m,U)=>m,"get-item-label":m=>m,"get-item-icon":()=>"","center-icon":"ðŸŽ¯",onSpinComplete:L},null,8,["modelValue","items","get-item-key","get-item-label"])])]))]),_:1}),$(O,{name:"results-fade"},{default:G(()=>[s(N)&&!s(t)?(v(),p("div",$e,[e("div",ke,[e("div",Fe,i(o.$t("common.category","Category")),1),e("div",Ae,[e("span",De,i(s(c)),1),e("span",Ne,i(s(d)),1)])]),h[2]||(h[2]=e("div",{class:"divider"},"Ã—",-1)),e("div",Be,[e("div",Ee,i(o.$t("common.letter","Letter")),1),e("div",Ve,[e("span",Le,i(s(u)),1)])])])):k("",!0)]),_:1}),s(t)?(v(),p("div",We,[$(z),e("p",Me,i(o.$t("home.starting_game","Starting game...")),1)])):k("",!0)])])}}}),xe=T(Te,[["__scopeId","data-v-b364b982"]]);export{xe as default};

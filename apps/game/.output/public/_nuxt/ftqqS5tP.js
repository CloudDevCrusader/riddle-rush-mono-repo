const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./hCWWAzTP.js","./DWK_0sY3.js","./entry.DYJQ1Ei9.css","./DQm_Q92W.js","./DrwKUBQh.js","./Z6VXXfMf.js","./LkFk--Sl.js","./PauseModal.DLfketAf.css","./f7jlNMBk.js","./Co5d2Ial.js","./QuitModal.Dr91_7v7.css"])))=>i.map(i=>d[i]);
import{F as T,G as H,u as V,H as K,I as Q,J as $,d as Y,r as S,k as j,o as J,K as W,x as X,y as w,z as p,A as t,L as C,M as y,B as g,N as o,O as q,P as Z,Q as ee,R as te,S as se,T as L,U as O,_ as re}from"./DWK_0sY3.js";import{u as ae}from"./DQm_Q92W.js";import{u as P}from"./DrwKUBQh.js";import{u as oe}from"./LkFk--Sl.js";import{u as ne}from"./Co5d2Ial.js";import"./Z6VXXfMf.js";const ie=T("/assets/alphabets/back.png"),le=T("/assets/alphabets/next.png");function ue(){const l=H(),b=V(),s=K(),c=ne(),{t:r}=Q(),d=$();return{startNewGame:async()=>{try{return await l.startNewGame(),c.playNewRound(),s.success(r("game.new_round_started","New round started!")),!0}catch(a){return d.error("Error starting new game:",a),s.error(r("game.error_starting","Failed to start game. Please try again.")),!1}},resumeOrStartGame:async()=>{const a=l.hasActiveSession;try{return await l.resumeOrStartNewGame(),a?s.info(r("game.resumed","Game resumed!")):(c.playNewRound(),s.info(r("game.welcome","Welcome! Guess a word from the category."))),!0}catch(m){return d.error("Error resuming game:",m),s.error(r("game.error_resuming","Failed to load game. Starting fresh.")),!1}},endGame:async()=>{try{return await l.endGame(),s.success(r("game.game_ended","Game ended! Check your statistics.")),b.push("/"),!0}catch(a){return d.error("Error ending game:",a),s.error(r("game.error_ending","Failed to save game results")),!1}},shareScore:async a=>{const m=a??l.currentScore;if(!navigator.share)return s.info(r("share.not_supported","Sharing is not supported on this device")),!1;try{return await navigator.share({title:r("share.score_title"),text:r("share.score_text",{score:m}),url:window.location.origin}),s.success(r("share.success","Score shared successfully!")),!0}catch(n){return n.name!=="AbortError"&&(d.error("Error sharing:",n),s.error(r("share.error","Failed to share score"))),!1}},setupMultiplayerGame:async(a,m,n)=>{try{return await l.setupPlayers(a,m,n),s.success(r("game.multiplayer_setup",`Game started with ${a.length} players!`)),!0}catch(u){return d.error("Error setting up multiplayer game:",u),s.error(r("game.error_multiplayer","Failed to setup multiplayer game")),!1}},startNextRound:async()=>{try{return await l.startNextRound(),c.playNewRound(),s.success(r("game.next_round","Next round started!")),!0}catch(a){return d.error("Error starting next round:",a),s.error(r("game.error_next_round","Failed to start next round")),!1}}}}const ce=L(()=>O(()=>import("./hCWWAzTP.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url).then(l=>l.default||l)),de=L(()=>O(()=>import("./f7jlNMBk.js"),__vite__mapDeps([8,1,2,3,4,5,6,9,10]),import.meta.url).then(l=>l.default||l)),me={class:"game-page"},ge={class:"game-header"},pe={class:"round-indicator"},_e={class:"round-text"},he={class:"game-container"},ye={class:"category-panel"},fe=["src"],ve={class:"category-name"},we={class:"letter-display"},be={class:"letter-value"},ke={key:0,class:"answer-input-section"},xe={class:"player-turn-indicator"},Se={class:"turn-label"},Ge={class:"turn-name"},Re=["placeholder"],Ae={type:"submit",class:"submit-answer-btn",disabled:!1},Ne={key:1,class:"all-submitted-message"},Ee={class:"bottom-nav"},Ce=Y({__name:"game",setup(l){const{baseUrl:b,toast:s,t:c,goHome:r}=ae(),{goToResults:d}=P(),{gameStore:k,currentCategory:G,currentLetter:x,currentRound:R,players:f,currentPlayerTurn:v,allPlayersSubmitted:a}=oe(),m=ue(),n=S(""),u=S(!1),_=S(!1),M=j(()=>(R.value||1).toString().padStart(2,"0")),A=()=>{r()},B=()=>{k.hasActiveSession?_.value=!0:A()},F=()=>{_.value=!1,A()},I=()=>{n.value=n.value.replace(/[<>]/g,""),n.value.length>50&&(n.value=n.value.slice(0,50))},N=async()=>{const i=v.value;if(i)try{const e=n.value.trim()||"";await k.submitPlayerAnswer(i.id,e),e?s.success(c("game.answer_submitted",`Answer submitted for ${i.name}`)):s.info(c("game.answer_skipped",`${i.name} skipped their turn`)),n.value="",a.value&&s.info(c("game.all_submitted","All players have submitted!"))}catch(e){$().error("Error submitting answer:",e),s.error(c("game.error_submitting","Failed to submit answer"))}},U=async()=>{if(f.value.length>0&&!a.value){s.warning(c("game.wait_for_players","Please wait for all players to submit"));return}d()},z=()=>{u.value=!1;const{goToPlayers:i}=P();i()};return J(async()=>{await m.resumeOrStartGame();const i=e=>{e.key==="Escape"&&!u.value&&(u.value=!0)};window.addEventListener("keydown",i),W(()=>{window.removeEventListener("keydown",i)})}),X({title:"Riddle Rush - Game",meta:[{name:"description",content:"An exciting word guessing game for friends and family. Play offline, perfect for game nights!"}]}),(i,e)=>{const E=ce,D=de;return p(),w("div",me,[e[9]||(e[9]=t("div",{class:"game-bg"},null,-1)),t("header",ge,[t("button",{"data-testid":"back-button",class:"back-btn tap-highlight no-select",onClick:B},[...e[5]||(e[5]=[t("img",{src:ie,alt:"Back",class:"back-icon"},null,-1)])]),t("div",pe,[t("span",_e," ROUND "+g(o(M)),1)]),t("button",{class:"pause-btn tap-highlight no-select","aria-label":"Pause game",onClick:e[0]||(e[0]=h=>u.value=!0)},[...e[6]||(e[6]=[t("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},[t("rect",{x:"6",y:"4",width:"4",height:"16"}),t("rect",{x:"14",y:"4",width:"4",height:"16"})],-1)])])]),t("div",he,[t("div",ye,[t("img",{src:`${o(b)}assets/alphabets/CATEGORY.png`,alt:"Category",class:"category-label-image"},null,8,fe),e[7]||(e[7]=t("div",{class:"category-label"},"CATEGORY",-1)),t("div",ve,g(o(G)?.name?.toUpperCase()||"LOADING..."),1)]),t("div",we,[t("span",be,g(o(x)?o(x).toUpperCase():"A"),1)]),o(f).length>0&&o(v)&&!o(a)?(p(),w("div",ke,[t("div",xe,[t("span",Se,g(i.$t("game.current_turn","Current Turn"))+":",1),t("span",Ge,g(o(v).name),1)]),t("form",{class:"answer-form",onSubmit:q(N,["prevent"])},[Z(t("input",{"onUpdate:modelValue":e[1]||(e[1]=h=>se(n)?n.value=h:null),type:"text",class:"answer-input",placeholder:i.$t("game.your_answer","Your answer..."),autocomplete:"off",autocapitalize:"words",maxlength:"50",onInput:I,onKeyup:te(N,["enter"])},null,40,Re),[[ee,o(n)]]),t("button",Ae,g(i.$t("game.submit","Submit")),1)],32)])):y("",!0),o(a)?(p(),w("div",Ne,[t("p",null,g(i.$t("game.all_submitted","All players have submitted!")),1)])):y("",!0)]),o(u)?(p(),C(E,{key:0,visible:o(u),onResume:e[2]||(e[2]=h=>u.value=!1),onRestart:z,onHome:e[3]||(e[3]=h=>u.value=!1)},null,8,["visible"])):y("",!0),o(_)?(p(),C(D,{key:1,visible:o(_),onConfirm:F,onCancel:e[4]||(e[4]=h=>_.value=!1)},null,8,["visible"])):y("",!0),t("div",Ee,[o(a)||o(f).length===0?(p(),w("button",{key:0,"data-testid":"next-button",class:"next-btn btn-primary tap-highlight no-select",onClick:U},[...e[8]||(e[8]=[t("img",{src:le,alt:"Next",class:"next-icon"},null,-1),t("span",{class:"next-text"},"NEXT",-1)])])):y("",!0)])])}}}),Be=re(Ce,[["__scopeId","data-v-a27fa7a9"]]);export{Be as default};

import{d as T,r as h,x as L,y as i,z as d,A as s,N as e,a1 as R,a2 as w,B as g,a4 as x,a6 as b,a7 as E,J as G,_ as I}from"./UCB55Jkd.js";import{u as P}from"./Ct_Hkr0K.js";import{u as D}from"./DYRgChO1.js";import{u as z}from"./CgnKtzc6.js";import{u as v}from"./DxG5Zqs5.js";import"./CYwQJd_N.js";const M={class:"results-page"},O=["src"],F=["src"],U={class:"container"},V={class:"title-container animate-fade-in"},H=["src"],J={class:"scores-list-container animate-scale-in"},K={class:"scores-list"},Y=["src"],j={class:"player-info"},q=["src"],Q={class:"player-details"},W={class:"player-name"},X={class:"player-answer"},Z={class:"player-score"},ss={class:"score-actions"},es=["aria-label","onClick"],as=["src"],os=["aria-label","onClick"],ts=["src"],cs={class:"scroll-bar"},ns=["src"],rs=["src"],ls={class:"action-buttons animate-slide-up"},is=["src"],ds=["disabled"],gs=["src"],us=T({__name:"results",setup(_s){const{baseUrl:t,toast:u,t:_,goBack:m}=P(),{goToGame:f,goToLeaderboard:S}=D(),{gameStore:p,players:k}=z(),n=h(!1),r=h(k.value.map(o=>({id:o.id,name:o.name,answer:o.currentRoundAnswer||"",score:o.currentRoundScore}))),y=v(),$=o=>{const a=r.value[o];a&&(a.score+=b,y.playScoreIncrease())},C=o=>{const a=r.value[o];a&&a.score>0&&(a.score-=b)},B=()=>{f()},N=async()=>{if(!n.value){n.value=!0;try{for(const a of r.value)await p.assignPlayerScore(a.id,a.score);await p.completeRound(),v().playRoundComplete(),u.success(_("results.scores_saved","Scores saved successfully!")),setTimeout(()=>{S()},E)}catch(o){G().error("Error saving scores:",o),u.error(_("results.error_saving","Failed to save scores. Please try again.")),n.value=!1}}};return L({title:"Scoring",meta:[{name:"description",content:"Game scoring"}]}),(o,a)=>(d(),i("div",M,[s("img",{src:`${e(t)}assets/scoring/BACKGROUND.png`,alt:"Background",class:"page-bg"},null,8,O),s("button",{class:"back-btn tap-highlight no-select",onClick:a[0]||(a[0]=(...c)=>e(m)&&e(m)(...c))},[s("img",{src:`${e(t)}assets/scoring/back.png`,alt:"Back"},null,8,F)]),s("div",U,[s("div",V,[s("img",{src:`${e(t)}assets/scoring/scoring.png`,alt:"Scoring",class:"title-image"},null,8,H)]),s("div",J,[s("div",K,[(d(!0),i(R,null,w(e(r),(c,l)=>(d(),i("div",{key:l,class:"score-item"},[s("img",{src:`${e(t)}assets/scoring/Shape 2.png`,alt:"Score slot",class:"score-slot-bg"},null,8,Y),s("div",j,[s("img",{src:`${e(t)}assets/scoring/xyz.png`,alt:"Player avatar",class:"player-avatar"},null,8,q),s("div",Q,[s("span",W,g(c.name),1),s("span",X,'"'+g(c.answer)+'"',1)])]),s("span",Z,g(c.score),1),s("div",ss,[s("button",{class:"score-action-btn tap-highlight no-select","aria-label":`Increase score for ${c.name}`,onClick:A=>$(l)},[s("img",{src:`${e(t)}assets/scoring/add.png`,alt:"Add"},null,8,as)],8,es),s("button",{class:"score-action-btn tap-highlight no-select","aria-label":`Decrease score for ${c.name}`,onClick:A=>C(l)},[s("img",{src:`${e(t)}assets/scoring/minus.png`,alt:"Minus"},null,8,ts)],8,os)])]))),128))]),s("div",cs,[s("img",{src:`${e(t)}assets/scoring/scroll bar.png`,alt:"Scroll bar",class:"scroll-bg"},null,8,ns),s("img",{src:`${e(t)}assets/scoring/screoll.png`,alt:"Scroll handle",class:"scroll-handle"},null,8,rs)])]),s("div",ls,[s("button",{class:"action-btn back-large-btn tap-highlight no-select","aria-label":"Go back to game",onClick:B},[s("img",{src:`${e(t)}assets/scoring/back-1.png`,alt:"Back"},null,8,is)]),s("button",{class:x(["action-btn next-btn tap-highlight no-select",{disabled:e(n)}]),disabled:e(n),"aria-label":"Continue to leaderboard",onClick:N},[s("img",{src:`${e(t)}assets/scoring/next.png`,alt:"Next"},null,8,gs)],10,ds)])])]))}}),Ss=I(us,[["__scopeId","data-v-9442cc60"]]);export{Ss as default};

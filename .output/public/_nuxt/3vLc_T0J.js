import{d as T,r as h,x as I,y as i,z as d,A as s,I as e,Y as R,Z as w,B as g,a1 as x,a3 as b,a4 as G,_ as L}from"./Cp2SN3y2.js";import{u as E}from"./B0bbR52k.js";import{u as P}from"./BiQ2uiMo.js";import{u as D}from"./WqLqjLwc.js";import{u as v}from"./CjavBx9G.js";const z={class:"results-page"},M=["src"],O=["src"],F={class:"container"},U={class:"title-container animate-fade-in"},V=["src"],Y={class:"scores-list-container animate-scale-in"},H={class:"scores-list"},K=["src"],Z={class:"player-info"},j=["src"],q={class:"player-details"},J={class:"player-name"},Q={class:"player-answer"},W={class:"player-score"},X={class:"score-actions"},ss=["aria-label","onClick"],es=["src"],as=["aria-label","onClick"],os=["src"],ts={class:"scroll-bar"},cs=["src"],ns=["src"],rs={class:"action-buttons animate-slide-up"},ls=["src"],is=["disabled"],ds=["src"],gs=T({__name:"results",setup(_s){const{baseUrl:o,toast:_,t:u,goBack:m}=E(),{goToGame:f,goToLeaderboard:S}=P(),{gameStore:p,players:k}=D(),n=h(!1),r=h(k.value.map(t=>({id:t.id,name:t.name,answer:t.currentRoundAnswer||"",score:t.currentRoundScore}))),y=v(),$=t=>{const a=r.value[t];a&&(a.score+=b,y.playScoreIncrease())},C=t=>{const a=r.value[t];a&&a.score>0&&(a.score-=b)},B=()=>{f()},A=async()=>{if(!n.value){n.value=!0;try{for(const a of r.value)await p.assignPlayerScore(a.id,a.score);await p.completeRound(),v().playRoundComplete(),_.success(u("results.scores_saved","Scores saved successfully!")),setTimeout(()=>{S()},G)}catch{_.error(u("results.error_saving","Failed to save scores. Please try again.")),n.value=!1}}};return I({title:"Scoring",meta:[{name:"description",content:"Game scoring"}]}),(t,a)=>(d(),i("div",z,[s("img",{src:`${e(o)}assets/scoring/BACKGROUND.png`,alt:"Background",class:"page-bg"},null,8,M),s("button",{class:"back-btn tap-highlight no-select",onClick:a[0]||(a[0]=(...c)=>e(m)&&e(m)(...c))},[s("img",{src:`${e(o)}assets/scoring/back.png`,alt:"Back"},null,8,O)]),s("div",F,[s("div",U,[s("img",{src:`${e(o)}assets/scoring/scoring.png`,alt:"Scoring",class:"title-image"},null,8,V)]),s("div",Y,[s("div",H,[(d(!0),i(R,null,w(e(r),(c,l)=>(d(),i("div",{key:l,class:"score-item"},[s("img",{src:`${e(o)}assets/scoring/Shape 2.png`,alt:"Score slot",class:"score-slot-bg"},null,8,K),s("div",Z,[s("img",{src:`${e(o)}assets/scoring/xyz.png`,alt:"Player avatar",class:"player-avatar"},null,8,j),s("div",q,[s("span",J,g(c.name),1),s("span",Q,'"'+g(c.answer)+'"',1)])]),s("span",W,g(c.score),1),s("div",X,[s("button",{class:"score-action-btn tap-highlight no-select","aria-label":`Increase score for ${c.name}`,onClick:N=>$(l)},[s("img",{src:`${e(o)}assets/scoring/add.png`,alt:"Add"},null,8,es)],8,ss),s("button",{class:"score-action-btn tap-highlight no-select","aria-label":`Decrease score for ${c.name}`,onClick:N=>C(l)},[s("img",{src:`${e(o)}assets/scoring/minus.png`,alt:"Minus"},null,8,os)],8,as)])]))),128))]),s("div",ts,[s("img",{src:`${e(o)}assets/scoring/scroll bar.png`,alt:"Scroll bar",class:"scroll-bg"},null,8,cs),s("img",{src:`${e(o)}assets/scoring/screoll.png`,alt:"Scroll handle",class:"scroll-handle"},null,8,ns)])]),s("div",rs,[s("button",{class:"action-btn back-large-btn tap-highlight no-select","aria-label":"Go back to game",onClick:B},[s("img",{src:`${e(o)}assets/scoring/back-1.png`,alt:"Back"},null,8,ls)]),s("button",{class:x(["action-btn next-btn tap-highlight no-select",{disabled:e(n)}]),disabled:e(n),"aria-label":"Continue to leaderboard",onClick:A},[s("img",{src:`${e(o)}assets/scoring/next.png`,alt:"Next"},null,8,ds)],10,is)])])]))}}),vs=L(gs,[["__scopeId","data-v-4a4ddbc2"]]);export{vs as default};

import{d as A,F as O,z as p,D as T,y as w,G as k,H as R,A as e,I as s,T as q,_ as N,J as U,K as j,u as z,L as J,M as W,r as x,k as X,o as Z,N as ee,x as te,C as M,B as b,O as se,P as ae,Q as ne}from"./Cp2SN3y2.js";import{u as B}from"./B0bbR52k.js";import{u as S}from"./BiQ2uiMo.js";import{u as P}from"./WqLqjLwc.js";import{u as H}from"./CjavBx9G.js";const oe={class:"pause-modal"},re=["src"],ie=["src"],le={class:"title-container"},ce=["src"],ue={class:"message-container"},de=["src"],me={class:"actions-container"},ge=["src"],pe=["src"],_e=["src"],he=A({__name:"PauseModal",props:{visible:{type:Boolean}},emits:["resume","restart","home"],setup(c,{emit:_}){const{baseUrl:t}=B(),{goHome:o}=S(),{gameStore:a}=P(),m=_,u=()=>{m("resume")},v=async()=>{a.hasActiveSession&&await a.abandonGame(),m("restart")},g=async()=>{a.hasActiveSession&&await a.abandonGame(),m("home"),o()};return(G,y)=>(p(),O(q,{name:"pause-fade"},{default:T(()=>[c.visible?(p(),w("div",{key:0,class:"pause-overlay",onClick:R(u,["self"])},[e("div",oe,[e("img",{src:`${s(t)}assets/paused/BACKGROUND.png`,alt:"Background",class:"pause-bg"},null,8,re),e("button",{class:"back-btn tap-highlight no-select",onClick:u},[e("img",{src:`${s(t)}assets/paused/back.png`,alt:"Back"},null,8,ie)]),e("div",le,[e("img",{src:`${s(t)}assets/paused/Game Paused.png`,alt:"Game Paused",class:"title-image"},null,8,ce)]),e("div",ue,[e("img",{src:`${s(t)}assets/paused/Game is paused, press  resume to continue_.png`,alt:"Game is paused, press resume to continue",class:"message-image"},null,8,de)]),e("div",me,[e("button",{class:"action-btn resume-btn tap-highlight no-select",onClick:u},[e("img",{src:`${s(t)}assets/paused/Resume.png`,alt:"Resume"},null,8,ge)]),e("button",{class:"action-btn restart-btn tap-highlight no-select",onClick:v},[e("img",{src:`${s(t)}assets/paused/Restart.png`,alt:"Restart"},null,8,pe)]),e("button",{class:"action-btn home-btn tap-highlight no-select",onClick:g},[e("img",{src:`${s(t)}assets/paused/Home.png`,alt:"Home"},null,8,_e)])])])])):k("",!0)]),_:1}))}}),be=Object.assign(N(he,[["__scopeId","data-v-b04a866d"]]),{__name:"PauseModal"}),ve={class:"quit-modal"},ye=["src"],fe=["src"],we={class:"title-container"},$e=["src"],ke={class:"message-container"},Ge=["src"],Ce={class:"actions-container"},Se=["src"],xe=["src"],Ae=A({__name:"QuitModal",props:{visible:{type:Boolean}},emits:["confirm","cancel"],setup(c,{emit:_}){const{baseUrl:t}=B(),{goHome:o}=S(),{gameStore:a}=P(),m=H(),u=_,v=async()=>{m.playClick(),a.hasActiveSession&&await a.abandonGame(),u("confirm"),o()},g=()=>{m.playClick(),u("cancel")};return(G,y)=>(p(),O(q,{name:"quit-fade"},{default:T(()=>[c.visible?(p(),w("div",{key:0,class:"quit-overlay",onClick:R(g,["self"])},[e("div",ve,[e("img",{src:`${s(t)}assets/quit/BACKGROUND.png`,alt:"Background",class:"quit-bg"},null,8,ye),e("button",{class:"back-btn tap-highlight no-select",onClick:g},[e("img",{src:`${s(t)}assets/quit/back.png`,alt:"Back"},null,8,fe)]),e("div",we,[e("img",{src:`${s(t)}assets/quit/QUIT GAME.png`,alt:"Quit Game",class:"title-image"},null,8,$e)]),e("div",ke,[e("img",{src:`${s(t)}assets/quit/Are you sure you want  to quit game_.png`,alt:"Are you sure you want to quit game?",class:"message-image"},null,8,Ge)]),e("div",Ce,[e("button",{class:"action-btn yes-btn tap-highlight no-select",onClick:v},[e("img",{src:`${s(t)}assets/quit/yes.png`,alt:"Yes"},null,8,Se)]),e("button",{class:"action-btn no-btn tap-highlight no-select",onClick:g},[e("img",{src:`${s(t)}assets/quit/no.png`,alt:"No"},null,8,xe)])])])])):k("",!0)]),_:1}))}}),Re=Object.assign(N(Ae,[["__scopeId","data-v-330e4449"]]),{__name:"QuitModal"}),Ne=U("/assets/alphabets/back.png"),Be=U("/assets/alphabets/next.png");function Pe(){const c=j(),_=z(),t=J(),o=H(),{t:a}=W();return{startNewGame:async()=>{try{return await c.startNewGame(),o.playNewRound(),t.success(a("game.new_round_started","New round started!")),!0}catch{return t.error(a("game.error_starting","Failed to start game. Please try again.")),!1}},resumeOrStartGame:async()=>{const i=c.hasActiveSession;try{return await c.resumeOrStartNewGame(),i?t.info(a("game.resumed","Game resumed!")):(o.playNewRound(),t.info(a("game.welcome","Welcome! Guess a word from the category."))),!0}catch{return t.error(a("game.error_resuming","Failed to load game. Starting fresh.")),!1}},endGame:async()=>{try{return await c.endGame(),t.success(a("game.game_ended","Game ended! Check your statistics.")),_.push("/"),!0}catch{return t.error(a("game.error_ending","Failed to save game results")),!1}},shareScore:async i=>{const d=i??c.currentScore;if(!navigator.share)return t.info(a("share.not_supported","Sharing is not supported on this device")),!1;try{return await navigator.share({title:a("share.score_title"),text:a("share.score_text",{score:d}),url:window.location.origin}),t.success(a("share.success","Score shared successfully!")),!0}catch($){return $.name!=="AbortError"&&t.error(a("share.error","Failed to share score")),!1}},setupMultiplayerGame:async(i,d,$)=>{try{return await c.setupPlayers(i,d,$),t.success(a("game.multiplayer_setup",`Game started with ${i.length} players!`)),!0}catch{return t.error(a("game.error_multiplayer","Failed to setup multiplayer game")),!1}},startNextRound:async()=>{try{return await c.startNextRound(),o.playNewRound(),t.success(a("game.next_round","Next round started!")),!0}catch{return t.error(a("game.error_next_round","Failed to start next round")),!1}}}}const Me={class:"game-page"},Oe={class:"game-header"},Te={class:"round-indicator"},qe={class:"round-text"},Ue={class:"game-container"},He={class:"category-panel"},Ee=["src"],Ie={class:"category-name"},De={class:"letter-display"},Fe={class:"letter-value"},Qe={key:0,class:"answer-input-section"},Le={class:"player-turn-indicator"},Ye={class:"turn-label"},Ke={class:"turn-name"},Ve=["placeholder"],je=["disabled"],ze={key:1,class:"all-submitted-message"},Je={class:"bottom-nav"},We=A({__name:"game",setup(c){const{baseUrl:_,toast:t,t:o,goHome:a}=B(),{goToResults:m}=S(),{gameStore:u,currentCategory:v,currentLetter:g,currentRound:G,players:y,currentPlayerTurn:i,allPlayersSubmitted:d}=P(),$=Pe(),l=x(""),h=x(!1),C=x(!1),E=X(()=>(G.value||1).toString().padStart(2,"0")),I=()=>{a()},D=()=>{u.hasActiveSession?C.value=!0:I()},F=()=>{l.value=l.value.replace(/[<>]/g,""),l.value.length>50&&(l.value=l.value.slice(0,50))},Q=async()=>{const r=i.value;if(!(!r||!l.value.trim()))try{await u.submitPlayerAnswer(r.id,l.value.trim()),t.success(o("game.answer_submitted",`Answer submitted for ${r.name}`)),l.value="",d.value&&t.info(o("game.all_submitted","All players have submitted!"))}catch{t.error(o("game.error_submitting","Failed to submit answer"))}},L=async()=>{if(y.value.length>0&&!d.value){t.warning(o("game.wait_for_players","Please wait for all players to submit"));return}m()},Y=()=>{h.value=!1;const{goToPlayers:r}=S();r()};return Z(async()=>{await $.resumeOrStartGame();const r=n=>{n.key==="Escape"&&!h.value&&(h.value=!0)};window.addEventListener("keydown",r),ee(()=>{window.removeEventListener("keydown",r)})}),te({title:()=>`${o("app.title")} - ${o("game.title","Game")}`,meta:[{name:"description",content:()=>o("app.description")}]}),(r,n)=>{const K=be,V=Re;return p(),w("div",Me,[n[10]||(n[10]=e("div",{class:"game-bg"},null,-1)),e("header",Oe,[e("button",{"data-testid":"back-button",class:"back-btn tap-highlight no-select",onClick:D},[...n[6]||(n[6]=[e("img",{src:Ne,alt:"Back",class:"back-icon"},null,-1)])]),e("div",Te,[e("span",qe," ROUND "+b(s(E)),1)]),e("button",{class:"pause-btn tap-highlight no-select","aria-label":"Pause game",onClick:n[0]||(n[0]=f=>h.value=!0)},[...n[7]||(n[7]=[e("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3","stroke-linecap":"round","stroke-linejoin":"round"},[e("rect",{x:"6",y:"4",width:"4",height:"16"}),e("rect",{x:"14",y:"4",width:"4",height:"16"})],-1)])])]),e("div",Ue,[e("div",He,[e("img",{src:`${s(_)}assets/alphabets/CATEGORY.png`,alt:"Category",class:"category-label-image"},null,8,Ee),n[8]||(n[8]=e("div",{class:"category-label"}," CATEGORY ",-1)),e("div",Ie,b(s(v)?.name?.toUpperCase()||"LOADING..."),1)]),e("div",De,[e("span",Fe,b(s(g)?s(g).toUpperCase():"A"),1)]),s(y).length>0&&s(i)&&!s(d)?(p(),w("div",Qe,[e("div",Le,[e("span",Ye,b(r.$t("game.current_turn","Current Turn"))+":",1),e("span",Ke,b(s(i).name),1)]),e("form",{class:"answer-form",onSubmit:R(Q,["prevent"])},[se(e("input",{"onUpdate:modelValue":n[1]||(n[1]=f=>ne(l)?l.value=f:null),type:"text",class:"answer-input",placeholder:r.$t("game.your_answer","Your answer..."),autocomplete:"off",autocapitalize:"words",maxlength:"50",onInput:F},null,40,Ve),[[ae,s(l)]]),e("button",{type:"submit",class:"submit-answer-btn",disabled:!s(l).trim()},b(r.$t("game.submit","Submit")),9,je)],32)])):k("",!0),s(d)?(p(),w("div",ze,[e("p",null,b(r.$t("game.all_submitted","All players have submitted!")),1)])):k("",!0)]),M(K,{visible:s(h),onResume:n[2]||(n[2]=f=>h.value=!1),onRestart:Y,onHome:n[3]||(n[3]=f=>h.value=!1)},null,8,["visible"]),M(V,{visible:s(C),onConfirm:n[4]||(n[4]=f=>C.value=!1),onCancel:n[5]||(n[5]=f=>C.value=!1)},null,8,["visible"]),e("div",Je,[s(d)||s(y).length===0?(p(),w("button",{key:0,"data-testid":"next-button",class:"next-btn btn-primary tap-highlight no-select",onClick:L},[...n[9]||(n[9]=[e("img",{src:Be,alt:"Next",class:"next-icon"},null,-1),e("span",{class:"next-text"},"NEXT",-1)])])):k("",!0)])])}}}),at=N(We,[["__scopeId","data-v-e8102407"]]);export{at as default};

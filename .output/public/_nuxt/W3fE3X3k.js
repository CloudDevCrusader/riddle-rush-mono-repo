import{V,W as R,k as E,s as X,X as N,I as i,r as C,d as Y,x as U,y as w,z as P,A as s,G,Y as I,Z as D,B as j,$ as W,O as z,P as K,a0 as O,Q as q,a1 as F,a2 as H,_ as Q}from"./Cp2SN3y2.js";import{u as Z}from"./B0bbR52k.js";import{u as J}from"./BiQ2uiMo.js";import{u as ee}from"./WqLqjLwc.js";const te=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ae=Object.prototype.toString,se=t=>ae.call(t)==="[object Object]";function L(t){return Array.isArray(t)?t:[t]}function le(t,l,n){return V(t,l,{...n,immediate:!0})}const ne=te?window:void 0;function re(t){var l;const n=N(t);return(l=n?.$el)!==null&&l!==void 0?l:n}function M(...t){const l=(e,r,d,y)=>(e.addEventListener(r,d,y),()=>e.removeEventListener(r,d,y)),n=E(()=>{const e=L(N(t[0])).filter(r=>r!=null);return e.every(r=>typeof r!="string")?e:void 0});return le(()=>{var e,r;return[(e=(r=n.value)===null||r===void 0?void 0:r.map(d=>re(d)))!==null&&e!==void 0?e:[ne].filter(d=>d!=null),L(N(n.value?t[1]:t[0])),L(i(n.value?t[2]:t[1])),N(n.value?t[3]:t[2])]},([e,r,d,y],p,o)=>{if(!e?.length||!r?.length||!d?.length)return;const m=se(y)?{...y}:y,u=e.flatMap(g=>r.flatMap(f=>d.map(S=>l(g,f,S,m))));o(()=>{u.forEach(g=>g())})},{flush:"post"})}function oe(t,l={}){const{threshold:n=50,onSwipe:e,onSwipeEnd:r,onSwipeStart:d,passive:y=!0}=l,p=R({x:0,y:0}),o=R({x:0,y:0}),m=E(()=>p.x-o.x),u=E(()=>p.y-o.y),{max:g,abs:f}=Math,S=E(()=>g(f(m.value),f(u.value))>=n),_=X(!1),k=E(()=>S.value?f(m.value)>f(u.value)?m.value>0?"left":"right":u.value>0?"up":"down":"none"),$=a=>[a.touches[0].clientX,a.touches[0].clientY],T=(a,v)=>{p.x=a,p.y=v},A=(a,v)=>{o.x=a,o.y=v},b={passive:y,capture:!y},B=a=>{_.value&&r?.(a,k.value),_.value=!1},h=[M(t,"touchstart",a=>{if(a.touches.length!==1)return;const[v,x]=$(a);T(v,x),A(v,x),d?.(a)},b),M(t,"touchmove",a=>{if(a.touches.length!==1)return;const[v,x]=$(a);A(v,x),b.capture&&!b.passive&&Math.abs(m.value)>Math.abs(u.value)&&a.preventDefault(),!_.value&&S.value&&(_.value=!0),_.value&&e?.(a)},b),M(t,["touchend","touchcancel"],B,b)];return{isSwiping:_,direction:k,coordsStart:p,coordsEnd:o,lengthX:m,lengthY:u,stop:()=>h.forEach(a=>a())}}function ie(t){const l=C(null),{isSwiping:n,direction:e,lengthX:r,lengthY:d}=oe(l,{threshold:t?.threshold??50,onSwipeEnd:(y,p)=>{p==="left"&&t?.onSwipeLeft?t.onSwipeLeft():p==="right"&&t?.onSwipeRight?t.onSwipeRight():p==="up"&&t?.onSwipeUp?t.onSwipeUp():p==="down"&&t?.onSwipeDown&&t.onSwipeDown()}});return{pageElement:l,isSwiping:n,direction:e,lengthX:r,lengthY:d}}const ce=["src"],ue=["src"],de={class:"container"},pe={class:"title-container animate-fade-in"},me=["src"],he=["src"],ye={class:"players-list-container animate-scale-in"},ve={class:"players-list"},ge=["src"],fe={class:"player-name"},_e=["onClick"],be=["src"],Se=["src"],we={class:"scroll-bar"},Pe=["src"],ke=["src"],$e={key:0,class:"player-input-container animate-scale-in"},xe=["placeholder"],Ee={class:"action-buttons animate-slide-up"},Ce=["src"],Ae=["src"],Ne=["disabled"],Te=["src"],Be=Y({__name:"players",setup(t){const{baseUrl:l,toast:n,t:e,goBack:r}=Z(),{goToRoundStart:d}=J(),{gameStore:y}=ee(),p=W,o=C([{name:"Player 1"},{name:"Player 2"}]),m=C(!1),u=C(""),g=C(null),f=()=>{if(o.value.length>=p){n.warning(e("players.max_players",`Maximum ${p} players allowed`));return}u.value=`Player ${o.value.length+1}`,m.value=!0,H(()=>{g.value?.focus(),g.value?.select()})},S=h=>{const c=h.trim();return c?c.length<1?{valid:!1,error:e("players.name_too_short","Player name must be at least 1 character")}:c.length>20?{valid:!1,error:e("players.name_too_long","Player name must be 20 characters or less")}:o.value.some(a=>a.name.toLowerCase()===c.toLowerCase())?{valid:!1,error:e("players.duplicate_name","A player with this name already exists")}:{valid:!0}:{valid:!1,error:e("players.name_required","Please enter a player name")}},_=()=>{u.value=u.value.replace(/[<>]/g,""),u.value.length>20&&(u.value=u.value.slice(0,20))},k=()=>{const h=u.value.trim(),c=S(h);if(!c.valid){n.warning(c.error||e("players.name_required","Please enter a player name"));return}o.value.push({name:h}),n.success(e("players.added",`${h} added!`)),u.value="",m.value=!1},$=()=>{u.value="",m.value=!1},T=h=>{const c=o.value[h]?.name;o.value.splice(h,1),c&&n.info(e("players.removed",`${c} removed`))},A=async()=>{if(o.value.length===0){n.warning(e("players.need_players","Add at least one player to start"));return}if(o.value.filter(c=>!S(c.name).valid).length>0){n.warning(e("players.invalid_names","Please fix invalid player names before starting"));return}try{const c=o.value.map(a=>a.name);y.pendingPlayerNames=c,n.success(e("players.ready",`${o.value.length} players ready!`)),d()}catch{n.error(e("players.error_start","Failed to start game. Please try again."))}},b=()=>{r()},{pageElement:B}=ie({onSwipeRight:()=>{b()},threshold:80});return U({title:"Players",meta:[{name:"description",content:"Select players for the game"}]}),(h,c)=>(P(),w("div",{ref_key:"pageElement",ref:B,class:"players-page"},[s("img",{src:`${i(l)}assets/players/BACKGROUND.png`,alt:"Background",class:"page-bg"},null,8,ce),s("button",{class:"back-btn tap-highlight no-select",onClick:b},[s("img",{src:`${i(l)}assets/players/back.png`,alt:"Back"},null,8,ue)]),s("div",de,[s("div",pe,[s("img",{src:`${i(l)}assets/players/players.png`,alt:"Players",class:"title-image"},null,8,me),s("img",{src:`${i(l)}assets/players/top.png`,alt:"Top decoration",class:"top-decoration"},null,8,he)]),s("div",ye,[s("div",ve,[(P(!0),w(I,null,D(i(o),(a,v)=>(P(),w("div",{key:v,class:"player-item"},[s("img",{src:`${i(l)}assets/players/Group 10.png`,alt:"Player slot",class:"player-slot-bg"},null,8,ge),s("span",fe,j(a.name),1),s("button",{class:"remove-player-btn tap-highlight no-select",onClick:x=>T(v)},[s("img",{src:`${i(l)}assets/players/minus.png`,alt:"Remove"},null,8,be)],8,_e)]))),128)),(P(!0),w(I,null,D(Math.max(0,i(p)-i(o).length),a=>(P(),w("div",{key:`empty-${a}`,class:"player-item empty"},[s("img",{src:`${i(l)}assets/players/Group 10.png`,alt:"Empty slot",class:"player-slot-bg"},null,8,Se),c[1]||(c[1]=s("span",{class:"player-name empty-text"},"Empty Slot",-1))]))),128))]),s("div",we,[s("img",{src:`${i(l)}assets/players/scroll bar.png`,alt:"Scroll bar",class:"scroll-bg"},null,8,Pe),s("img",{src:`${i(l)}assets/players/screoll.png`,alt:"Scroll handle",class:"scroll-handle"},null,8,ke)])]),i(m)?(P(),w("div",$e,[z(s("input",{ref_key:"playerNameInput",ref:g,"onUpdate:modelValue":c[0]||(c[0]=a=>q(u)?u.value=a:null),type:"text",placeholder:h.$t("players.enter_name","Enter player name"),class:"player-name-input tap-highlight",maxlength:"20",onKeyup:[O(k,["enter"]),O($,["esc"])],onInput:_},null,40,xe),[[K,i(u)]]),s("div",{class:"input-buttons"},[s("button",{class:"input-btn confirm-btn tap-highlight no-select",onClick:k}," ✓ "),s("button",{class:"input-btn cancel-btn tap-highlight no-select",onClick:$}," ✕ ")])])):G("",!0),s("div",Ee,[i(o).length<i(p)&&!i(m)?(P(),w("button",{key:0,class:"action-btn add-btn tap-highlight no-select",onClick:f},[s("img",{src:`${i(l)}assets/players/add back.png`,alt:"Add button bg",class:"btn-bg"},null,8,Ce),s("img",{src:`${i(l)}assets/players/add.png`,alt:"Add",class:"btn-icon"},null,8,Ae)])):G("",!0),s("button",{disabled:i(o).length===0,class:F(["action-btn start-btn tap-highlight no-select",{disabled:i(o).length===0}]),onClick:A},[s("img",{src:`${i(l)}assets/players/start.png`,alt:"Start"},null,8,Te)],10,Ne)])])],512))}}),Ie=Q(Be,[["__scopeId","data-v-248be589"]]);export{Ie as default};

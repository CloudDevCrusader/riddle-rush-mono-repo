import{d as W,r as m,k as N,V as Y,y as g,z as p,A as e,a7 as V,I as s,Y as H,Z as j,a1 as U,G as b,B as c,_ as D,o as Q,x as Z,C as $,D as E,Q as P,T as G,a8 as J,a9 as X}from"./Cp2SN3y2.js";import{u as q}from"./B0bbR52k.js";import{u as ee}from"./BiQ2uiMo.js";import{u as te}from"./WqLqjLwc.js";const se={class:"wheel-container"},ne=["onClick"],ae={class:"segment-content"},oe={class:"wheel-center"},le={class:"center-circle"},re={key:0,class:"selected-icon"},ce={key:1,class:"center-icon"},ie=W({__name:"FortuneWheel",props:{items:{},getItemKey:{},getItemLabel:{},getItemIcon:{type:Function,default:()=>()=>""},getItemColor:{type:Function,default:void 0},centerIcon:{default:"ðŸŽ¯"},modelValue:{default:null}},emits:["update:modelValue","spin-complete"],setup(n,{expose:w,emit:C}){const v=n,r=C,f=m(v.modelValue),a=m(0),i=m(!1),h=N(()=>360/v.items.length),S=["#6BA8D8","#5B9DC9","#4A92BA","#6BB5D8","#5BAAC9","#4A9FBA","#6BC2D8","#5BB7C9","#4AACBA","#75BBE0","#65B0D1","#55A5C2"],k=t=>{const o=t*h.value,u=v.getItemColor?v.getItemColor(v.items[t],t):S[t%S.length];return{transform:`rotate(${o}deg)`,transformOrigin:"50% 50%",background:u,"--segment-color":u}},R=t=>{i.value=!0,a.value=t,setTimeout(()=>{i.value=!1},1500)},B=(t,o)=>{if(i.value||!t)return;f.value=t,r("update:modelValue",t);const I=-(o*h.value)+90-360*3;R(I),setTimeout(()=>{t&&r("spin-complete",t)},1500)};return w({spinRandom:()=>{if(i.value||v.items.length===0)return null;const t=Math.floor(Math.random()*v.items.length),o=v.items[t];if(!o)return null;const u=-(t*h.value)+90,_=3+Math.floor(Math.random()*3),I=u-360*_;return R(I),setTimeout(()=>{o&&(f.value=o,r("update:modelValue",o),r("spin-complete",o))},1500),o},isSpinning:i}),Y(()=>v.modelValue,t=>{f.value=t}),(t,o)=>(p(),g("div",se,[o[1]||(o[1]=e("div",{class:"wheel-pointer"},[e("div",{class:"pointer-arrow"}," â–¼ ")],-1)),e("div",{class:"fortune-wheel",style:V({transform:`rotate(${s(a)}deg)`})},[(p(!0),g(H,null,j(n.items,(u,_)=>(p(),g("button",{key:n.getItemKey(u,_),class:U(["wheel-segment tap-highlight no-select",{selected:s(f)&&n.getItemKey(s(f),-1)===n.getItemKey(u,_)}]),style:V(k(_)),onClick:I=>B(u,_)},[e("div",ae,[n.getItemIcon(u)?(p(),g("span",{key:0,class:"segment-icon",style:V({transform:`rotate(-${s(a)+_*s(h)}deg)`})},c(n.getItemIcon(u)),5)):b("",!0),e("span",{class:"segment-text",style:V({transform:`rotate(-${s(a)+_*s(h)}deg)`})},c(n.getItemLabel(u)),5)])],14,ne))),128))],4),e("div",oe,[o[0]||(o[0]=e("div",{class:"center-glow"},null,-1)),e("div",le,[s(f)&&n.getItemIcon(s(f))?(p(),g("span",re,c(n.getItemIcon(s(f))),1)):(p(),g("span",ce,c(n.centerIcon),1))])])]))}}),ue=Object.assign(D(ie,[["__scopeId","data-v-e60b4743"]]),{__name:"FortuneWheel"}),de={key:0,class:"spinner__label"},me=W({__name:"Spinner",props:{size:{default:"md"},label:{},overlay:{type:Boolean,default:!1}},setup(n){return(w,C)=>(p(),g("div",{class:U(["spinner",[`spinner--${n.size}`,{"spinner--overlay":n.overlay}]])},[C[0]||(C[0]=e("div",{class:"spinner__circle"},null,-1)),n.label?(p(),g("span",de,c(n.label),1)):b("",!0)],2))}}),ge=Object.assign(D(me,[["__scopeId","data-v-2f1a2264"]]),{__name:"Spinner"}),pe={class:"round-start-page"},ve=["src"],_e={class:"top-bar"},fe={class:"round-indicator"},he={class:"round-text"},ye={class:"container"},Ce={key:0,class:"wheels-container"},Ie={class:"wheel-wrapper"},Se={class:"wheel-label"},Re={class:"wheel-wrapper"},$e={class:"wheel-label"},be={key:0,class:"results-display"},we={class:"result-item animate-scale-in"},ke={class:"result-label"},Be={class:"result-value"},Ae={class:"result-icon"},Ve={class:"result-text"},Ne={class:"result-item animate-scale-in",style:{"animation-delay":"0.2s"}},We={class:"result-label"},De={class:"result-value"},Le={class:"result-text result-letter"},Te={key:0,class:"loading-container"},Fe={class:"loading-text"},Me=W({__name:"round-start",setup(n){const{baseUrl:w,t:C}=q(),{goToGame:v}=ee(),{gameStore:r}=te(),f="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),a=m(null),i=m(null),h=m([]),S=m(),k=m(),R=m(!1),B=m(!1),A=m(!1),t=m(!1),o={female_name:"ðŸ‘©",male_name:"ðŸ‘¨",water_vehicle:"â›µ",flowers:"ðŸŒ¸",plants:"ðŸŒ¿",profession:"ðŸ‘”",insect:"ðŸ›",animal:"ðŸ¦",city:"ðŸ™ï¸",country:"ðŸŒ",food:"ðŸ•",drink:"ðŸ§ƒ",sport:"âš½",music:"ðŸŽµ",movie:"ðŸŽ¬"},u=N(()=>a.value?L(a.value):"ðŸ“¦"),_=N(()=>a.value?C(`categories.${a.value.searchWord}`,a.value.name):""),I=N(()=>r.currentSession?r.currentSession.currentRound+1:1);Q(async()=>{await r.fetchCategories();const l=r.categories;h.value=l.slice(0,12),setTimeout(()=>{S.value?.spinRandom(),k.value?.spinRandom()},500)});const L=l=>o[l.searchWord]||"ðŸ“¦",K=l=>{a.value=l,R.value=!0,T()},O=l=>{i.value=l,B.value=!0,T()},T=()=>{R.value&&B.value&&setTimeout(()=>{A.value=!0,setTimeout(()=>{x()},J)},X)},x=async()=>{if(!(!a.value||!i.value)){t.value=!0;try{if(!!r.currentSession)await r.startNextRound(a.value,i.value);else{const y=r.pendingPlayerNames.length>0?r.pendingPlayerNames:["Player 1"];await r.setupPlayers(y,void 0,i.value,a.value),r.pendingPlayerNames=[],r.selectedLetter=null}await v()}catch{t.value=!1}}};return Z({title:"Round Start",meta:[{name:"description",content:"Spinning for category and letter"}]}),(l,y)=>{const F=ue,z=ge;return p(),g("div",pe,[e("img",{src:`${s(w)}assets/alphabets/BACKGROUND.png`,alt:"Background",class:"page-bg"},null,8,ve),e("div",_e,[e("div",fe,[e("div",he,c(l.$t("game.round","Round"))+" "+c(s(I)),1)])]),e("div",ye,[$(G,{name:"wheel-fade"},{default:E(()=>[s(A)?b("",!0):(p(),g("div",Ce,[e("div",Ie,[e("div",Se,c(l.$t("common.category","Category")),1),$(F,{ref_key:"categoryWheelRef",ref:S,modelValue:s(a),"onUpdate:modelValue":y[0]||(y[0]=d=>P(a)?a.value=d:null),items:s(h),"get-item-key":(d,M)=>d?.searchWord||M,"get-item-label":d=>l.$t(`categories.${d.searchWord}`,d.name),"get-item-icon":L,"center-icon":"ðŸŽ¯",onSpinComplete:K},null,8,["modelValue","items","get-item-key","get-item-label"])]),e("div",Re,[e("div",$e,c(l.$t("common.letter","Letter")),1),$(F,{ref_key:"letterWheelRef",ref:k,modelValue:s(i),"onUpdate:modelValue":y[1]||(y[1]=d=>P(i)?i.value=d:null),items:s(f),"get-item-key":(d,M)=>d,"get-item-label":d=>d,"get-item-icon":()=>"","center-icon":"ðŸŽ¯",onSpinComplete:O},null,8,["modelValue","items","get-item-key","get-item-label"])])]))]),_:1}),$(G,{name:"results-fade"},{default:E(()=>[s(A)&&!s(t)?(p(),g("div",be,[e("div",we,[e("div",ke,c(l.$t("common.category","Category")),1),e("div",Be,[e("span",Ae,c(s(u)),1),e("span",Ve,c(s(_)),1)])]),y[2]||(y[2]=e("div",{class:"divider"}," Ã— ",-1)),e("div",Ne,[e("div",We,c(l.$t("common.letter","Letter")),1),e("div",De,[e("span",Le,c(s(i)),1)])])])):b("",!0)]),_:1}),s(t)?(p(),g("div",Te,[$(z),e("p",Fe,c(l.$t("home.starting_game","Starting game...")),1)])):b("",!0)])])}}}),Ke=D(Me,[["__scopeId","data-v-e649c670"]]);export{Ke as default};
